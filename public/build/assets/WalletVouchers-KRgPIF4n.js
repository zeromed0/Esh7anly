import{r,c as _,w as V,a as e,i,v as x,l as C,o as n,f as p,F as k,m as S,t as d,n as U,j as B,e as v,d as m}from"./app-0rN-RD4x.js";import{A as L}from"./AdminLayout-B31MEDCB.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"p-4 sm:p-6 bg-gray-50 min-h-screen"},W={class:"mb-4 p-4 bg-white rounded shadow flex flex-col sm:flex-row gap-2 items-start sm:items-center"},D={class:"flex flex-col sm:flex-row gap-2 mb-4 items-start sm:items-center"},I={class:"overflow-x-auto bg-white rounded shadow p-2"},M={class:"w-full text-left border-collapse"},N={class:"font-mono"},j={class:"flex gap-2"},z=["onClick"],E={key:0},T={__name:"WalletVouchers",props:{vouchers:Array},setup(h){const b=r([...h.vouchers]),u=r([...b.value]),l=r(""),c=r(""),a=r(""),g=()=>{if(!l.value||l.value<=0){alert("الرجاء إدخال قيمة صحيحة");return}v({amount:l.value}).post("/admin/wallet-vouchers",{onSuccess:()=>{m.reload()}})},w=o=>{if(!confirm("هل تريد حذف هذا الكود؟"))return;v({}).delete("/admin/wallet-vouchers/"+o,{onSuccess:()=>m.reload()})},f=()=>{u.value=b.value.filter(o=>{const t=o.code.toLowerCase().includes(c.value.toLowerCase()),s=a.value==="used"?o.is_used:a.value==="unused"?!o.is_used:!0;return t&&s})},y=()=>{m.reload()};return(o,t)=>(n(),_(L,null,{default:V(()=>[e("div",F,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold mb-4 sm:mb-6 text-gray-800"},"أكواد المحفظة (Wallet Vouchers)",-1)),e("div",W,[i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),type:"number",min:"1",placeholder:"القيمة",class:"border p-2 rounded w-full sm:w-1/3"},null,512),[[x,l.value,void 0,{number:!0}]]),e("button",{onClick:g,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition"}," إنشاء كود تلقائي ")]),e("div",D,[i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),placeholder:"بحث عن كود...",onInput:f,class:"border p-2 rounded w-full sm:w-1/3"},null,544),[[x,c.value]]),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value=s),onChange:f,class:"border p-2 rounded w-full sm:w-1/4"},[...t[3]||(t[3]=[e("option",{value:""},"الكل",-1),e("option",{value:"used"},"مستخدم",-1),e("option",{value:"unused"},"غير مستخدم",-1)])],544),[[C,a.value]]),e("button",{onClick:y,class:"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 transition"},"تحديث")]),e("div",I,[e("table",M,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"border-b bg-gray-50"},[e("th",{class:"px-2 py-1"},"الكود"),e("th",{class:"px-2 py-1"},"القيمة"),e("th",{class:"px-2 py-1"},"الحالة"),e("th",{class:"px-2 py-1"},"المستخدم"),e("th",{class:"px-2 py-1"},"أفعال")])],-1)),e("tbody",null,[(n(!0),p(k,null,S(u.value,s=>(n(),p("tr",{key:s.id,class:"border-b hover:bg-gray-50 transition"},[e("td",N,d(s.code),1),e("td",null,d(s.amount)+" د.أ",1),e("td",{class:U(s.is_used?"text-red-600":"text-green-600")},d(s.is_used?"مستخدم":"غير مستخدم"),3),e("td",null,d(s.used_by||"-"),1),e("td",j,[e("button",{onClick:q=>w(s.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 text-xs sm:text-sm"}," حذف ",8,z)])]))),128)),u.value.length===0?(n(),p("tr",E,[...t[4]||(t[4]=[e("td",{colspan:"5",class:"text-center text-gray-500 py-2"},"لا توجد أكواد حتى الآن.",-1)])])):B("",!0)])])])])]),_:1}))}},K=A(T,[["__scopeId","data-v-b1531c96"]]);export{K as default};
