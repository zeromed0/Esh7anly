import{c as k,w as C,a as e,o as n,f as u,F as x,m as g,n as v,t as i,i as V,v as j,j as p,r as c,d as B}from"./app-0rN-RD4x.js";import{U as N}from"./UserLayout-BZwvJO8r.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./wallet-CAijwS9K.js";const U={class:"p-6 md:p-8 max-w-6xl mx-auto"},F={class:"flex justify-between items-center mb-6"},S={class:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2 mb-6"},q=["onClick"],I=["src"],$={class:"text-xs font-semibold text-gray-700 text-center truncate w-full"},D={key:0,class:"bg-white rounded-xl shadow-md p-4 animate-fadeIn"},E={class:"text-lg font-semibold text-blue-700 mb-1"},G={class:"text-gray-600 text-sm mb-4"},L={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mb-4"},M=["onClick"],P=["src"],R={class:"font-semibold text-blue-500 text-sm"},z={class:"text-xs text-gray-500 mt-1"},A={class:"mb-6"},Q={__name:"Vouchers",props:{user:Object,games:Array},setup(b){const s=c(null),a=c(null),m=c(1),r=c(""),d=c("text-green-600"),f=o=>{s.value=o,a.value=null,r.value=""},h=o=>{a.value=o,r.value=""},_=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"MRU"}).format(o||0),y=async()=>{if(!s.value||!a.value){r.value="Please select a game and offer first.",d.value="text-red-600";return}try{await B.post("/user/vouchers",{game_id:s.value.id,offer_id:a.value.id,quantity:m.value},{onSuccess:()=>{r.value="✅ Voucher codes received successfully!",d.value="text-green-600",m.value=1,a.value=null},onError:o=>{r.value=o.error?o.error:"Failed to process your request. Please try again.",d.value="text-red-600"}})}catch{r.value="Something went wrong.",d.value="text-red-600"}};return(o,l)=>(n(),k(N,{user:b.user},{default:C(()=>[e("div",U,[e("div",F,[l[2]||(l[2]=e("h2",{class:"text-2xl font-semibold text-blue-700"},"Voucher Offers",-1)),e("button",{class:"text-blue-600 hover:text-blue-800 text-sm font-medium",onClick:l[0]||(l[0]=t=>s.value=null)}," Reset ↻ ")]),e("div",S,[(n(!0),u(x,null,g(b.games,t=>(n(),u("div",{key:t.id,onClick:w=>f(t),class:v(["bg-white/80 backdrop-blur-sm rounded-xl shadow-sm hover:shadow-md p-2 cursor-pointer transition hover:-translate-y-1 flex flex-col items-center border",s.value&&s.value.id===t.id?"border-blue-600":"border-transparent"])},[e("img",{src:t.image||"/images/default-game.jpg",class:"w-10 h-10 rounded-full object-cover mb-1"},null,8,I),e("p",$,i(t.name),1)],10,q))),128))]),s.value?(n(),u("div",D,[e("h3",E,i(s.value.name),1),e("p",G,i(s.value.description||"No description available."),1),e("div",L,[(n(!0),u(x,null,g(s.value.offers,t=>(n(),u("div",{key:t.id,onClick:w=>h(t),class:v(["border rounded-xl p-3 text-center cursor-pointer hover:shadow-md transition",a.value&&a.value.id===t.id?"border-blue-600 bg-blue-50":"border-gray-200"])},[e("img",{src:t.image||"/images/default-offer.jpg",class:"w-16 h-16 rounded-full object-cover mx-auto mb-2"},null,8,P),e("p",R,i(t.name),1),e("p",z,i(_(t.price)),1)],10,M))),128))]),e("div",A,[l[3]||(l[3]=e("label",{class:"block text-gray-700 mb-1 font-medium"},"Quantity",-1)),V(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t),type:"number",min:"1",class:"w-full md:w-1/3 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"},null,512),[[j,m.value,void 0,{number:!0}]])]),e("div",{class:"text-right"},[e("button",{onClick:y,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-lg shadow transition"}," Buy Now ")]),r.value?(n(),u("p",{key:0,class:v(["mt-4 text-sm font-medium",d.value])},i(r.value),3)):p("",!0)])):p("",!0)])]),_:1},8,["user"]))}},W=O(Q,[["__scopeId","data-v-84bbb049"]]);export{W as default};
