import{U as R}from"./UserLayout-BZwvJO8r.js";import{c as U,w as F,a as t,I as L,o as a,f as n,j as p,F as m,m as b,n as f,t as o,k as r,x as w,d as V,r as d}from"./app-0rN-RD4x.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./wallet-CAijwS9K.js";const Y={key:0,class:"text-center text-blue-600 font-medium mb-2"},M={class:"flex space-x-2 mb-5 overflow-x-auto pb-1"},W=["onClick"],$={key:1,class:"text-center text-gray-500 mt-10"},q={class:"space-y-3"},E={class:"flex justify-between items-center mb-1"},O={class:"font-semibold text-gray-800 text-sm"},Q={class:"text-sm text-gray-700 font-medium truncate"},Z={class:"text-sm mt-1 font-bold text-blue-600"},G={class:"mt-2 bg-gray-50 rounded-lg p-3 text-sm"},H={class:"mt-2 space-y-2"},J={key:0},K={key:1,class:"space-y-1 mt-1"},X={class:"font-mono"},ee=["onClick"],te={key:2},se={__name:"Transactions",props:{user:Object,transactions:Array},setup(v){const y=v,k=[{label:"All",value:"all"},{label:"Completed",value:"completed"},{label:"Pending",value:"pending"},{label:"Rejected",value:"rejected"}],c=d("all"),g=w(()=>c.value==="all"?y.transactions:y.transactions.filter(e=>e.status===c.value)),C=e=>e==="topup"?"ðŸ”¼ Top-up":e==="voucher"?"ðŸŽŸï¸ Voucher":e==="wallet"?"ðŸ’° Wallet":e,T=e=>({"bg-green-100 text-green-700":e==="completed","bg-yellow-100 text-yellow-700":e==="pending","bg-red-100 text-red-700":e==="rejected"}),j=e=>({"bg-green-500":e==="completed","bg-yellow-500":e==="pending","bg-red-500":e==="rejected"}),D=e=>e.charAt(0).toUpperCase()+e.slice(1),N=e=>navigator.clipboard.writeText(e),_=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"MRU"}).format(e||0),S=e=>new Date(e).toLocaleString("fr-MR",{timeZone:"Africa/Nouakchott"}),h=d(0),u=d(0),x=d(!1),A=w(()=>({transform:"translateY("+u.value+"px)",transition:u.value===0?"transform 0.2s ease-out":"none"})),B=e=>{h.value=e.touches[0].clientY},I=e=>{const l=e.touches[0].clientY-h.value;l>0&&l<120&&(u.value=l)},P=()=>{u.value>80&&(x.value=!0,setTimeout(()=>V.visit("/user/transactions",{preserveScroll:!0}),300)),u.value=0};return(e,l)=>(a(),U(R,{user:v.user},{default:F(()=>[t("div",{class:"p-4 max-w-4xl mx-auto",onTouchstart:B,onTouchmove:I,onTouchend:P,style:L(A.value)},[x.value?(a(),n("div",Y," ðŸ”„ Refreshing... ")):p("",!0),l[5]||(l[5]=t("h1",{class:"text-xl font-bold text-blue-700 mb-4"},"Transactions",-1)),t("div",M,[(a(),n(m,null,b(k,s=>t("button",{key:s.value,onClick:i=>c.value=s.value,class:f(["px-4 py-2 rounded-full text-sm font-medium border transition whitespace-nowrap",c.value===s.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300"])},o(s.label),11,W)),64))]),g.value.length===0?(a(),n("p",$," No transactions found. ")):p("",!0),t("div",q,[(a(!0),n(m,null,b(g.value,s=>(a(),n("div",{key:s.id,class:"bg-white shadow-sm rounded-xl p-4 border relative"},[t("div",{class:f(["absolute top-3 right-3 w-3 h-3 rounded-full",j(s.status)])},null,2),t("div",E,[t("p",O,[r(o(C(s.type))+" | ",1),t("span",null,"ID: "+o(s.id),1)]),t("span",{class:f(["text-xs font-semibold px-2 py-1 rounded-full",T(s.status)])},o(D(s.status)),3)]),t("p",Q,o(s.game_name)+" â€” "+o(s.offer_name),1),t("p",Z,[r(o(_(s.total_price))+" | ",1),t("span",null,[l[0]||(l[0]=t("strong",null,"Quantity",-1)),r(": "+o(s.quantity),1)])]),t("details",G,[l[4]||(l[4]=t("summary",{class:"cursor-pointer font-semibold text-gray-800"},"Details",-1)),t("div",H,[t("p",null,[l[1]||(l[1]=t("strong",null,"Balance After:",-1)),r(" "+o(_(s.balance_after)),1)]),t("p",null,[l[2]||(l[2]=t("strong",null,"Date:",-1)),r(" "+o(S(s.created_at)),1)]),s.type==="topup"?(a(),n("p",J,[l[3]||(l[3]=t("strong",null,"Player ID:",-1)),r(" "+o(s.player_id),1)])):s.type==="voucher"?(a(),n("ul",K,[(a(!0),n(m,null,b(s.codes,i=>(a(),n("li",{key:i,class:"flex justify-between items-center bg-white p-2 rounded border"},[t("span",X,o(i),1),t("button",{onClick:le=>N(i),class:"text-blue-600 hover:text-blue-800 text-xs font-semibold"}," ðŸ“‹ Copy ",8,ee)]))),128))])):s.type==="wallet"?(a(),n("p",te,"Wallet recharge by admin.")):p("",!0)])])]))),128))])],36)]),_:1},8,["user"]))}},ue=z(se,[["__scopeId","data-v-2eee18bb"]]);export{ue as default};
